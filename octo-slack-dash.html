<!DOCTYPE html>
<html>
    <head>
        <title>Octo-Slack-Dash</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="osd-scripts.js"></script>
        <script src="osd-printers.js"></script>
        <script src="osd-printer.js"></script>
        <script src="osd-http-request-wrapper.js"></script>
        <script src="osd-printer-module.js"></script>
        <script src="sockjs.min.js"></script>
        <script src="packed-client.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
        <link href="osd-css.css" rel="stylesheet">
        <link href="osd-css-modals.css" rel="stylesheet">
        <link href="osd-css-overlays.css" rel="stylesheet">
        <link href="osd-css-printer-modules.css" rel="stylesheet">
    </head>
    <body>
        <div class="test_area" id="test_area"></div>
        <div class="nav_bar" id="nav_bar"></div>
        <div class="octo_slack_modal" id="octo_slack_modal"></div>
        <div class="snapshot_modal" id="snapshot_modal"></div>
        <div class = "shell">
            <div class="container" id="container"></div>
        </div><!--./shell-->

        <script>
            var blackMamba = new printer("Black Mamba", "Rostock Max v2", undefined, "octopi1key");
            var mobyDick = new printer("Moby Dick", "Rostock Max v2", undefined, "0200628F557F4FF8B6FE08697140284F");
            var printrbot = new printer("Printrbot", "PrintrBot Simple Metal", undefined, "55909A86E92C49B6BF8FBAB5C61726C3");
            var stu = new printer("Stu i3", "Wanhao Duplicator i3", undefined, "octopi4apikey");

            createNavBar();
            createOctoSlackModal();
            createSnapshotModal();
            createSecondLevelObjectEventListeners();

            // var socket = new WebSocket("ws://155.97.12.120:5001/echo");
            //
            // socket.onopen = function() {
            //     socket.send("Darin send.");
            // };
            //
            // socket.onmessage = function(msg) {
            //     document.getElementById("test_area").innerHTML = JSON.stringify(msg);
            // };

            if ("WebSocket" in window)
            {
            //    alert("WebSocket is supported by your Browser!");

               // Let us open a web socket
               var ws = new WebSocket("ws://155.97.12.120:5001/listen");

               ws.onopen = function()
               {
                  // Web Socket is connected, send data using send()
                  ws.send("Message to send. What's up? Another test.");
                //   alert("Message is sent...");
               };

               ws.onmessage = function (evt)
               {
                  var received_msg = evt.data;
                //   alert("Message is received...");
                  document.getElementById("test_area").innerHTML = JSON.stringify(received_msg);
               };

               ws.onclose = function()
               {
                  // websocket is closed.
                //   alert("Connection is closed...");
               };
            }

            else
            {
               // The browser doesn't support WebSocket
               alert("WebSocket NOT supported by your Browser!");
            }

        </script>
    </body>
</html>
